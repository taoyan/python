<html>
<head>
	<title></title>
	<style>
		*{
			padding: 0;
			/* margin: 0; */
		}
		ul{
			list-style: none;
		}
		li{
			border-bottom: 1px solid gray;
		}
	</style>
</head>
<body>

	<div id="music">
		<audio :src="currentSong" autoplay = "" controls="" @ended="nextSong"></audio>

		<ul>
			<li v-for="(item, index) in songs" @click="clickHandler(index)">
				<h1>歌名:{{ item.name }}</h1>
				<p>歌手:{{ item.author }}</p>
				<p v-if="index == currentIndex">current</p>
			</li>
		</ul>

		<button @click = "addSong">添加</button>
	</div>

	<script type="text/javascript" src="./js/vue.js"></script>
	<script type="text/javascript">
		var songs = [
			{id:1, src:'./audios/1.mp3', name:"lalala", author:"ck"},
			{id:1, src:'./audios/2.mp3', name:"2222", author:"swift"},
			{id:1, src:'./audios/3.mp3', name:"3333", author:"ck"},
			{id:1, src:'./audios/4.mp3', name:"4444", author:"swift"},
		]
		var music = new Vue({
			el:"#music",
			data:{
				songs:songs,
				// currentSong:"./audios/1.mp3",
				currentIndex:0,
			},
			methods:{
				clickHandler(index){
					// this.currentSong = this.songs[index].src;
					this.currentIndex = index;
				},
				nextSong(){
					// alert("aa");
					this.currentIndex ++;
					// this.currentSong = this.songs[self.currentIndex];
				},
				addSong(){
					this.songs.push({id:1, src:'./audios/4.mp3', name:"4444", author:"swift"})
				}
			},
			// 监听计算数据
			computed:{
				currentSong(){
					console.log("11111");
					//这里绑定了songs和currentIndex
					return this.songs[this.currentIndex].src;
				},
			},
			created:{

			}
		})
	</script>
</body>
</html>